<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="utf-8">
    <title>Feel-Good Website</title>
    <link href="img/favicon.ico" rel="shortcut icon">
    <link href="css/main-theme.css" rel="stylesheet">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
  </head>
  <body>
    <div class="quote-background-table">
      <div class="quote-background-cell">
        <div class="quote-background">
          <div class="quote-container">
            <span class="quote-text" id="js-quote-phrase"></span>
            <span class="quote-text" id="js-quote-signature"></span>
          </div>
        </div>
      </div>
    </div>
    <button class="refresh-button" id="js-quote-refresh"><i class="fa fa-refresh" aria-hidden="true" style="margin-right: 10px"></i>Another one</button>
    <script id="quotes_json" type="application/json">
      [
        {
          "phrase": "\"Algorithm\" — word used by programmers when they do not want to explain what they did.",
          "signature": "Merriam-Webster Dictionary"
        },
        {
          "phrase": "\"Programmer\" — a machine that turns coffee into code.",
          "signature": "Merriam-Webster Dictionary"
        },
        {
          "phrase": "Chuck Norris writes code... that optimizes itself."
        },
        {
          "phrase": "3 Database SQL walked into a NoSQL bar. A little while later they walked out. Because they couldn't find a table."
        },
        {
          "phrase": "A foo walks into a bar, takes a look around and says \"Hello World\"!"
        },
        {
          "phrase": "A SQL query walks into a bar, walks up to two tables and asks \"Can I join you?\"."
        },
        {
          "phrase": "The glass is twice as large as necessary.",
          "signature": "Engineers"
        },
        {
          "phrase": "A programmer had a problem. He decided to use Java. He now has a ProblemFactory."
        }
      ]
    </script>
    <script>
      Array.prototype.randomElement = function() {
            return this[Math.floor(Math.random() * this.length)];
      }
      function getFormatterSignature(quote_signature) {
        if (typeof quote_signature === "undefined") {
          return "";
        }
        return "— " + quote_signature;
      }
      var json_quotes = document.getElementById("quotes_json");
      var refresh_button = document.getElementById("js-quote-refresh");
      var quotes = JSON.parse(json_quotes.textContent);
      var random_quote;
      var formatted_phrase;
      var formatted_signature;
      var setFormattedQuote = function() {
        random_quote = quotes.randomElement();
        formatted_phrase = "“" + random_quote["phrase"] + "”";
        formatted_signature = getFormatterSignature(random_quote["signature"]);
        document.getElementById("js-quote-phrase").textContent = formatted_phrase;
        document.getElementById("js-quote-signature").textContent = formatted_signature;
      };
      refresh_button.onclick = setFormattedQuote;
      setFormattedQuote();
    </script>
  </body>
</html>
