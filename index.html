<!DOCTYPE html>
<html lang="ru">
  <head>
    <title>Feel-Good Website</title>
    <link href="css/main-theme.css" rel="stylesheet">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script id="quotes_json" type="application/json">
      [
        {
          "phrase": "Кукурузные хлопья - теперь без асбеста!",
          "signature": "Неизвестный маркетолог"
        },
        {
          "phrase": "Собираюсь жить вечно, пока всё идёт нормально"
        },
        {
          "phrase": "Вывеска над кафе — '\u003cМы открылись\u003e'. Что-то не так. Где же '\u003c/Мы открылись\u003e'?"
        },
        {
          "phrase": "Если ты будешь усердно работать по 8 часов в день, то обязательно станешь боссом и начнешь работать по 12. Если ты будешь усердно работать по 8 часов в день, то обязательно станешь боссом и начнешь работать по 12. Если ты будешь усердно работать по 8 часов в день, то обязательно станешь боссом и начнешь работать по 12.",
          "signature": "Неизвестный маркетолог"
        }
      ]
    </script>
  </head>
  <body>
    <div class="quote-background-table">
      <div class="quote-background-cell">
        <div class="quote-background">
          <span class="quote-text" id="js-quote-phrase"></span>
          <span class="quote-text" id="js-quote-signature"></span>
        </div>
      </div>
    </div>
    <button class="refresh-button" id="js-quote-refresh"><i class="fa fa-refresh" aria-hidden="true" style="margin-right: 10px"></i>Another one</button>
    <script>
      Array.prototype.randomElement = function() {
            return this[Math.floor(Math.random() * this.length)];
      }
      function getFormatterSignature(quote_signature) {
        if (typeof quote_signature === "undefined") {
          return "";
        }
        return "— " + quote_signature;
      }
      var json_quotes = document.getElementById("quotes_json");
      var refresh_button = document.getElementById("js-quote-refresh");
      var quotes = JSON.parse(json_quotes.textContent);
      var random_quote;
      var formatted_phrase;
      var formatted_signature;
      var setFormattedQuote = function() {
        random_quote = quotes.randomElement();
        formatted_phrase = "“" + random_quote["phrase"] + "”";
        formatted_signature = getFormatterSignature(random_quote["signature"]);
        document.getElementById("js-quote-phrase").textContent = formatted_phrase;
        document.getElementById("js-quote-signature").textContent = formatted_signature;
      };
      refresh_button.onclick = setFormattedQuote;
      setFormattedQuote();
    </script>
  </body>
</html>
